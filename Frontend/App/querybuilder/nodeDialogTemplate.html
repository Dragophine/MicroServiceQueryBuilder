<!DOCTYPE html>
<div >
  <h1>{{ctrl.name}}</h1>
      <div ng-repeat="keyNode in ctrl.keys track by $index" >
         <div ng-repeat="key in keyNode['Keys']" ng-init="parentIndex = $index">
            <h2>{{key}}</h2>
            <div class="row panel" >
              <div class="col-md-5">
                <div class="row">
                  <input id="inlineradio0" type="checkbox" class="col-md-2"
                           ng-checked="ctrl.isFilterAttributesChecked(key)"
                           ng-click="ctrl.setFilterAttributes(key)">
                  <div  class="col-md-10">
                      FILTER
                   </div>
                </div>
                <div ng-if="ctrl.isFilterAttributesChecked(key)" class="top-buffer-small"> 
                  <div >
                    TYPE
                  </div>
                    <select name="singleSelect" id="singleSelect" 
                      ng-model="type"
                      ng-change="ctrl.setFilterAttributesDynamic(key, 'type', type)" 
                      ng-watch='ctrl.getFilterAttributes(key)'
                      ng-watch-object-value="type">
                      <option value="string">STRING</option> 
                      <option value="integer">INT</option>
                      <option value="double">DOUBLE</option>
                      <option value="date">DATE</option>
                   </select>
                   <div class="top-buffer-small">
                    FILTER TYPE
                  </div>
                    <select name="singleSelect" id="singleSelect" 
                      ng-model="filterType"
                      ng-change="ctrl.setFilterAttributesDynamic(key, 'filterType', filterType)" 
                      ng-watch='ctrl.getFilterAttributes(key)'
                      ng-watch-object-value="filterType">
                      <option value="=">EQUALS</option> 
                      <option value="<">GREATER</option>
                      <option value=">">SMALLER</option>
                      <option value="<=">GREATER EQUAL</option>
                      <option value=">=">SMALLER EQUAL</option>
                   </select>
                  <div class="top-buffer-small">
                    FILTER
                  </div>
                  <input type="textarea" class="form-control" id="query" 
                          ng-change="ctrl.setFilterAttributesDynamic(key, 'value', value)" 
                          ng-watch='ctrl.getFilterAttributes(key)'
                          ng-watch-object-value="value"
                          ng-model="value"/>
                    <div class="top-buffer-small">
                    CHANGEABLE
                    </div>
                     <input type="checkbox" class="col-md-2"
                           ng-value="true"
                           ng-model="changeable"
                           ng-change="ctrl.setFilterAttributesDynamic(key, 'changeable', changeable)"
                           ng-watch='ctrl.getFilterAttributes(key)'
                           ng-watch-object-value="changeable">
                </div>
              </div>
              <div class="col-md-3">
                 <div class="row">
                   <input id="inlineradio1" type="checkbox" class="col-md-2"
                           ng-checked="ctrl.isReturnAttributesChecked(key)"
                           ng-click="ctrl.setReturnAttributes(key)">
                   <div  class="col-md-10">
                      RETURN
                   </div>
                 </div>
              </div>
              <div class="col-md-3">
                <div class="row">
                  <input  type="checkbox"  class="col-md-1"
                          ng-checked="ctrl.isOrderByAttributesChecked(key)"
                          ng-click="ctrl.setOrderByAttributes(key)">
                  <div class="col-md-2" >
                      ORDER
                  </div>
                </div>
                
                <div class="row top-buffer-small" ng-if="ctrl.isOrderByAttributesChecked(key)">
                  <input  type="radio" class="col-md-1" 
                          name="{{'radio' + key}}"
                          value="asc"
                          ng-model="value"
                          ng-change='ctrl.setOrderByAttributesValue(key, value)'
                          ng-watch='ctrl.getOrderByAttributes(key)'
                          ng-watch-object-value="direction">
                  <div class="col-md-2" >
                      ASC
                  </div>
                </div> 
                <div class="row top-buffer-small" ng-if="ctrl.isOrderByAttributesChecked(key)">
                  <input  type="radio" class="col-md-1"
                          name="{{'radio' + key}}"
                          value="desc"
                          ng-model="value"
                          ng-change='ctrl.setOrderByAttributesValue(key, value)'
                          ng-watch='ctrl.getOrderByAttributes(key)'
                          ng-watch-object-value="direction">
                  <div class="col-md-2" >
                      DESC
                  </div>
                </div>
              </div>
            </div>
          </div>
      </div>
      <div style="display: inline;" >
          <div ng-repeat="relationship in ctrl.relationships"  style="display: inline;" >
              <button ng-repeat="label in relationship['Labels']"  class="btn btn-default"
                      ng-click="ctrl.addRelationship(relationship['Relation'], relationship['Direction'], label)">
                  {{relationship['Relation']}}
                <span ng-if="relationship['Direction'] == 'OUTGOING'"
                    class="glyphicon glyphicon-arrow-down"></span>
                <span ng-if="relationship['Direction'] == 'INGOING'"
                    class="glyphicon glyphicon-arrow-up"></span>
                  {{label}}
              </button>
          </div>
      </div>
</div>